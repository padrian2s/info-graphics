<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Info Graphics Hub</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,400,0,0">
    <style>
        :root {
            --bg0: #070A12;
            --bg1: #0B1222;
            --card: rgba(15,26,51,.65);
            --card-hover: rgba(15,26,51,.85);
            --stroke: #1f2b4d;
            --text: #EAF0FF;
            --muted: #A8B3D6;
            --muted2: #7E8BB5;
            --good: #2EE59D;
            --warn: #FFCC66;
            --blue: #66A3FF;
            --vio: #B38CFF;
            --teal: #37D6FF;
            --shadow: 0 18px 60px rgba(0,0,0,.35);
            --radius: 16px;
            --radius-sm: 10px;
            --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; }

        body {
            font-family: var(--sans);
            color: var(--text);
            background:
                radial-gradient(1100px 700px at 20% 12%, rgba(102,163,255,.18), transparent 55%),
                radial-gradient(1000px 700px at 80% 20%, rgba(179,140,255,.14), transparent 60%),
                radial-gradient(1100px 800px at 50% 90%, rgba(46,229,157,.10), transparent 60%),
                linear-gradient(180deg, var(--bg0), var(--bg1) 55%, #070A12);
            background-attachment: fixed;
            min-height: 100vh;
            line-height: 1.5;
        }

        a { color: inherit; text-decoration: none; }

        .material-symbols-rounded {
            font-family: 'Material Symbols Rounded';
            font-weight: normal;
            font-style: normal;
            font-size: 1.25rem;
            line-height: 1;
            display: inline-flex;
            vertical-align: middle;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1180px;
            margin: 0 auto;
            padding: 28px 18px 80px;
        }

        /* Header */
        header {
            text-align: center;
            padding: 40px 20px 30px;
        }

        .logo-wrap {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            border-radius: 16px;
            background: conic-gradient(from 200deg, var(--blue), var(--vio), var(--good), var(--teal), var(--blue));
            box-shadow: 0 0 0 1px rgba(255,255,255,.12) inset, 0 12px 30px rgba(0,0,0,.28);
            margin-bottom: 16px;
            position: relative;
        }

        .logo-wrap::after {
            content: "";
            position: absolute;
            inset: 10px;
            border-radius: 10px;
            background: rgba(7,10,18,.8);
        }

        .logo-wrap .material-symbols-rounded {
            font-size: 1.5rem;
            position: relative;
            z-index: 1;
        }

        header h1 {
            font-size: 2rem;
            font-weight: 780;
            letter-spacing: -.5px;
            margin-bottom: 8px;
        }

        header p {
            color: var(--muted);
            font-size: 1rem;
        }

        /* Top Bar / Controls */
        .topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 12px 16px;
            border: 1px solid var(--stroke);
            border-radius: 999px;
            background: linear-gradient(180deg, rgba(15,26,51,.75), rgba(15,26,51,.35));
            backdrop-filter: blur(12px);
            box-shadow: 0 18px 60px rgba(0,0,0,.22);
            position: sticky;
            top: 12px;
            z-index: 20;
            margin-bottom: 28px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 200px;
            position: relative;
        }

        .search-box .material-symbols-rounded {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--muted2);
            font-size: 1.1rem;
        }

        .search-box input {
            width: 100%;
            padding: 10px 14px 10px 42px;
            border: 1px solid rgba(255,255,255,.1);
            border-radius: 999px;
            font-size: 0.9rem;
            background: rgba(7,10,18,.4);
            color: var(--text);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .search-box input::placeholder {
            color: var(--muted2);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(102,163,255,.15);
        }

        .controls-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* View Switcher */
        .view-switcher {
            display: flex;
            gap: 2px;
            background: rgba(7,10,18,.4);
            padding: 4px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,.08);
        }

        .view-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 999px;
            background: transparent;
            color: var(--muted2);
            cursor: pointer;
            transition: all 0.2s;
        }

        .view-btn:hover {
            color: var(--text);
        }

        .view-btn.active {
            background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
            color: var(--text);
            box-shadow: 0 2px 8px rgba(0,0,0,.2);
        }

        .view-btn .material-symbols-rounded {
            font-size: 1.1rem;
        }

        /* Filter Pills */
        .filter-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 8px 0;
        }

        .filter-btn {
            padding: 8px 14px;
            border: 1px solid rgba(255,255,255,.1);
            border-radius: 999px;
            background: rgba(7,10,18,.3);
            color: var(--muted);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .filter-btn:hover {
            border-color: rgba(255,255,255,.2);
            color: var(--text);
        }

        .filter-btn.active {
            background: linear-gradient(180deg, rgba(102,163,255,.25), rgba(102,163,255,.1));
            border-color: var(--blue);
            color: var(--text);
        }

        /* Category Sections */
        .category {
            margin-bottom: 36px;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--stroke);
        }

        .category-header .material-symbols-rounded {
            color: var(--blue);
        }

        .category-title {
            font-size: 1.1rem;
            font-weight: 650;
        }

        .category-count {
            background: rgba(255,255,255,.08);
            padding: 2px 10px;
            border-radius: 999px;
            font-size: 0.75rem;
            color: var(--muted2);
        }

        /* Page Cards Grid */
        .pages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }

        .page-card {
            background: var(--card);
            border: 1px solid var(--stroke);
            border-radius: var(--radius);
            padding: 20px;
            transition: all 0.25s ease;
            display: block;
            position: relative;
            overflow: hidden;
        }

        .page-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background:
                radial-gradient(300px 150px at 10% 10%, rgba(102,163,255,.08), transparent 50%),
                radial-gradient(250px 150px at 90% 80%, rgba(179,140,255,.06), transparent 50%);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .page-card:hover {
            transform: translateY(-3px);
            border-color: rgba(102,163,255,.4);
            background: var(--card-hover);
            box-shadow: var(--shadow);
        }

        .page-card:hover::before {
            opacity: 1;
        }

        .page-card > * {
            position: relative;
        }

        .page-card h3 {
            font-size: 1rem;
            font-weight: 620;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            line-height: 1.3;
        }

        .page-card h3 .material-symbols-rounded {
            color: var(--good);
            font-size: 1.2rem;
        }

        .page-card p {
            color: var(--muted);
            font-size: 0.875rem;
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .page-card .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .tag {
            background: rgba(255,255,255,.06);
            border: 1px solid rgba(255,255,255,.08);
            padding: 3px 10px;
            border-radius: 999px;
            font-size: 0.7rem;
            color: var(--muted2);
        }

        .page-card .date {
            font-size: 0.75rem;
            color: var(--muted2);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .page-card .date .material-symbols-rounded {
            font-size: 0.9rem;
            color: var(--teal);
        }

        .page-card .category-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.7rem;
            color: var(--vio);
            background: rgba(179,140,255,.12);
            border: 1px solid rgba(179,140,255,.2);
            padding: 3px 10px;
            border-radius: 999px;
            margin-bottom: 10px;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 80px 20px;
            color: var(--muted);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: var(--muted);
        }

        .empty-state h3 {
            font-size: 1.25rem;
            margin-bottom: 8px;
            color: var(--text);
        }

        /* Responsive */
        @media (max-width: 700px) {
            .container {
                padding: 16px 12px 60px;
            }

            header {
                padding: 24px 16px 20px;
            }

            header h1 {
                font-size: 1.5rem;
            }

            .topbar {
                padding: 10px 12px;
                border-radius: 20px;
                flex-direction: column;
                gap: 10px;
            }

            .search-box {
                width: 100%;
            }

            .controls-right {
                width: 100%;
                justify-content: center;
            }

            .filter-group {
                justify-content: center;
            }

            .pages-grid {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }

        /* Folder Cards */
        .folder-card {
            background: linear-gradient(180deg, rgba(15,26,51,.85), rgba(15,26,51,.55));
            border: 1px solid var(--stroke);
            border-radius: var(--radius);
            padding: 0;
            transition: all 0.25s ease;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .folder-card .folder-preview {
            width: 100%;
            height: 160px;
            overflow: hidden;
            position: relative;
            background: rgba(7,10,18,.5);
        }

        .folder-card .folder-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .folder-card:hover .folder-preview img {
            transform: scale(1.05);
        }

        .folder-card .folder-preview-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 40%, rgba(7,10,18,.8) 100%);
            pointer-events: none;
        }

        .folder-card .folder-content {
            padding: 20px;
        }

        .folder-card .folder-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .folder-card .folder-header h3 {
            margin: 0;
        }

        .folder-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background:
                radial-gradient(400px 200px at 0% 0%, rgba(255,204,102,.12), transparent 50%),
                radial-gradient(300px 150px at 100% 100%, rgba(179,140,255,.1), transparent 50%);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .folder-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255,204,102,.5);
            box-shadow: 0 20px 60px rgba(0,0,0,.4);
        }

        .folder-card:hover::before {
            opacity: 1;
        }

        .folder-card > * {
            position: relative;
        }

        .folder-card .folder-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(255,204,102,.2), rgba(255,204,102,.08));
            border: 1px solid rgba(255,204,102,.25);
            flex-shrink: 0;
        }

        .folder-card .folder-icon .material-symbols-rounded {
            font-size: 1.25rem;
            color: var(--warn);
        }

        .folder-card h3 {
            font-size: 1.15rem;
            font-weight: 650;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .folder-card .folder-desc {
            color: var(--muted);
            font-size: 0.875rem;
            margin-bottom: 16px;
            line-height: 1.55;
        }

        .folder-card .folder-meta {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .folder-card .folder-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            color: var(--muted2);
        }

        .folder-card .folder-stat .material-symbols-rounded {
            font-size: 1rem;
            color: var(--teal);
        }

        .folder-card .folder-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 12px;
        }

        .folders-section {
            margin-bottom: 32px;
        }

        .folders-section .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--stroke);
        }

        .folders-section .section-header .material-symbols-rounded {
            color: var(--warn);
        }

        .folders-section .section-title {
            font-size: 1.1rem;
            font-weight: 650;
        }

        .folders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 16px;
        }

        @media (max-width: 700px) {
            .folders-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-wrap">
                <span class="material-symbols-rounded" aria-hidden="true">bar_chart</span>
            </div>
            <h1>Info Graphics Hub</h1>
            <p>Navigate and explore all available pages</p>
        </header>

        <div class="topbar">
            <div class="search-box">
                <span class="material-symbols-rounded" aria-hidden="true">search</span>
                <input type="text" id="search" placeholder="Search pages..." autocomplete="off">
            </div>
            <div class="controls-right">
                <div class="view-switcher" id="viewSwitcher">
                    <button class="view-btn active" data-view="folder" title="Folders">
                        <span class="material-symbols-rounded">folder_open</span>
                    </button>
                    <button class="view-btn" data-view="category" title="By Category">
                        <span class="material-symbols-rounded">category</span>
                    </button>
                    <button class="view-btn" data-view="date" title="By Date">
                        <span class="material-symbols-rounded">calendar_month</span>
                    </button>
                    <button class="view-btn" data-view="grid" title="Grid View">
                        <span class="material-symbols-rounded">grid_view</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="filter-group" id="filters">
            <button class="filter-btn active" data-category="all">All</button>
        </div>

        <main id="content">
            <div class="loading">Loading pages...</div>
        </main>
    </div>

    <script>
        /**
         * HTML FILES LIST
         */
        const htmlFiles = [
            "2026_AI_Strategy_Comparison.html",
            "2026-brain2.html",
            "2026-predictions.html",
            "agents-domain-memory.html",
            "ai-factory-era.html",
            "ai-strategy.html",
            "ai-strategy2.html",
            "ai-talent-market.html",
            "claude.html",
            "good-4-ai.html",
            "google-vs-openai.html",
            "llm-psy.html",
            "napoleon-technique.html",
            "personal-agents.html",
            "engineering-mode-trigger-levels.html"
        ];

        /**
         * FOLDERS LIST - each folder has its own index.html
         */
        const folders = [
            {
                id: "social-ai",
                name: "Social AI",
                path: "social-ai/",
                description: "Global AI & Prompt Engineering Readiness Reports - Interactive infographics analyzing country readiness for AI coding agents.",
                icon: "public",
                tags: ["Interactive", "Reports", "Global Analysis"],
                fileCount: 6,
                image: "image_5.png"
            }
        ];

        const categoryMeta = {
            "AI Strategy": { icon: "architecture", order: 1 },
            "AI Agents": { icon: "smart_toy", order: 2 },
            "AI Principles": { icon: "check_circle", order: 3 },
            "AI Risks": { icon: "warning", order: 4 },
            "Future Predictions": { icon: "auto_awesome", order: 5 },
            "Industry Analysis": { icon: "factory", order: 6 },
            "Documentation": { icon: "menu_book", order: 10 },
            "Data Visualization": { icon: "bar_chart", order: 11 },
            "Reports": { icon: "analytics", order: 12 },
            "Tools": { icon: "handyman", order: 13 },
            "Reference": { icon: "library_books", order: 14 },
            "Uncategorized": { icon: "folder", order: 50 },
            "Archive": { icon: "inventory_2", order: 99 }
        };

        const iconMap = {
            "üß†": "psychology",
            "üîÆ": "auto_awesome",
            "ü§ñ": "smart_toy",
            "üè≠": "factory",
            "üìê": "architecture",
            "üéØ": "track_changes",
            "üìò": "menu_book",
            "üìä": "bar_chart",
            "üìà": "show_chart",
            "‚úÖ": "check_circle",
            "‚è≥": "hourglass_empty",
            "üëî": "person",
            "‚ö†Ô∏è": "warning"
        };

        // State
        let pages = [];
        let activeCategory = "all";
        let searchQuery = "";
        let currentView = "folder";

        function extractMeta(html, name) {
            const match = html.match(new RegExp(`<meta\\s+name="${name}"\\s+content="([^"]*)"`, 'i'));
            return match ? match[1] : "";
        }

        function extractTitle(html) {
            const match = html.match(/<title>([^<]*)<\/title>/i);
            return match ? match[1] : "Untitled";
        }

        function extractTextContent(html) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            doc.querySelectorAll('script, style').forEach(el => el.remove());
            return doc.body ? doc.body.textContent.replace(/\s+/g, ' ').trim() : "";
        }

        async function fetchPageMeta(filename, order) {
            try {
                const response = await fetch(filename);
                if (!response.ok) return null;

                const html = await response.text();
                const id = filename.replace('.html', '').toLowerCase();
                const tags = extractMeta(html, 'tags');
                const rawIcon = extractMeta(html, 'icon');
                const resolvedIcon = iconMap[rawIcon] || "description";

                const dateStr = extractMeta(html, 'created');
                const createdDate = dateStr ? new Date(dateStr) : null;

                return {
                    id,
                    title: extractTitle(html),
                    description: extractMeta(html, 'description'),
                    href: filename,
                    category: extractMeta(html, 'category') || "Uncategorized",
                    tags: tags ? tags.split(',').map(t => t.trim()) : [],
                    icon: resolvedIcon,
                    order,
                    textContent: extractTextContent(html),
                    created: createdDate,
                    createdStr: dateStr || null
                };
            } catch (e) {
                console.error(`Failed to load ${filename}:`, e);
                return null;
            }
        }

        async function loadPages() {
            const results = await Promise.all(htmlFiles.map((filename, index) => fetchPageMeta(filename, index)));
            pages = results.filter(p => p !== null).sort((a, b) => a.order - b.order);
            initFilters();
            render();
        }

        function getCategories() {
            const cats = [...new Set(pages.map(p => p.category))];
            return cats.sort((a, b) => {
                const orderA = categoryMeta[a]?.order || 50;
                const orderB = categoryMeta[b]?.order || 50;
                return orderA - orderB;
            });
        }

        function initFilters() {
            const container = document.getElementById("filters");
            const allBtn = container.querySelector('[data-category="all"]');
            container.innerHTML = '';
            container.appendChild(allBtn);

            getCategories().forEach(cat => {
                const btn = document.createElement("button");
                btn.className = "filter-btn";
                btn.dataset.category = cat;
                btn.textContent = cat;
                container.appendChild(btn);
            });
        }

        function filterPages() {
            const query = searchQuery.toLowerCase().trim();

            return pages.filter(page => {
                if (activeCategory !== "all" && page.category !== activeCategory) {
                    return false;
                }

                if (query) {
                    const searchable = [
                        page.title,
                        page.description,
                        page.category,
                        ...page.tags,
                        page.textContent
                    ].join(" ").toLowerCase();
                    return searchable.includes(query);
                }

                return true;
            });
        }

        function groupByCategory(pageList) {
            const groups = {};
            pageList.forEach(page => {
                if (!groups[page.category]) groups[page.category] = [];
                groups[page.category].push(page);
            });
            return groups;
        }

        function formatDate(date) {
            if (!date) return null;
            return date.toLocaleDateString('ro-RO', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        function renderCard(page, options = {}) {
            const { showDate = false, showCategoryBadge = false } = options;
            const dateHtml = showDate && page.created
                ? `<div class="date"><span class="material-symbols-rounded">calendar_month</span>${formatDate(page.created)}</div>`
                : '';
            const categoryBadgeHtml = showCategoryBadge
                ? `<span class="category-badge">${page.category}</span>`
                : '';

            return `
                <a href="${page.href}" class="page-card">
                    <h3><span class="material-symbols-rounded" aria-hidden="true">${page.icon}</span> ${page.title}</h3>
                    ${dateHtml}
                    ${categoryBadgeHtml}
                    <p>${page.description}</p>
                    <div class="tags">
                        ${page.tags.map(t => `<span class="tag">${t}</span>`).join("")}
                    </div>
                </a>
            `;
        }

        function renderCategoryView(filtered) {
            const grouped = groupByCategory(filtered);
            const categories = Object.keys(grouped).sort((a, b) => {
                const orderA = categoryMeta[a]?.order || 50;
                const orderB = categoryMeta[b]?.order || 50;
                return orderA - orderB;
            });

            return categories.map(cat => {
                const meta = categoryMeta[cat] || { icon: "folder" };
                return `
                    <section class="category">
                        <div class="category-header">
                            <span class="material-symbols-rounded" aria-hidden="true">${meta.icon}</span>
                            <h2 class="category-title">${cat}</h2>
                            <span class="category-count">${grouped[cat].length}</span>
                        </div>
                        <div class="pages-grid">
                            ${grouped[cat].map(p => renderCard(p)).join("")}
                        </div>
                    </section>
                `;
            }).join("");
        }

        function renderDateView(filtered) {
            const sorted = [...filtered].sort((a, b) => {
                if (a.created && b.created) return b.created - a.created;
                if (a.created) return -1;
                if (b.created) return 1;
                return a.order - b.order;
            });

            return `
                <div class="pages-grid">
                    ${sorted.map(p => renderCard(p, { showDate: true, showCategoryBadge: true })).join("")}
                </div>
            `;
        }

        function renderGridView(filtered) {
            const sorted = [...filtered].sort((a, b) => a.order - b.order);
            return `
                <div class="pages-grid">
                    ${sorted.map(p => renderCard(p, { showCategoryBadge: true })).join("")}
                </div>
            `;
        }

        function renderFolderCard(folder) {
            const imageHtml = folder.image
                ? `<div class="folder-preview">
                       <img src="${folder.image}" alt="${folder.name} preview" loading="lazy">
                       <div class="folder-preview-overlay"></div>
                   </div>`
                : '';

            return `
                <a href="${folder.path}" class="folder-card">
                    ${imageHtml}
                    <div class="folder-content">
                        <div class="folder-header">
                            <div class="folder-icon">
                                <span class="material-symbols-rounded" aria-hidden="true">${folder.icon}</span>
                            </div>
                            <h3>${folder.name}</h3>
                        </div>
                        <p class="folder-desc">${folder.description}</p>
                        <div class="folder-meta">
                            <div class="folder-stat">
                                <span class="material-symbols-rounded">description</span>
                                ${folder.fileCount} files
                            </div>
                        </div>
                        <div class="folder-tags">
                            ${folder.tags.map(t => `<span class="tag">${t}</span>`).join("")}
                        </div>
                    </div>
                </a>
            `;
        }

        function filterFolders() {
            const query = searchQuery.toLowerCase().trim();
            if (!query) return folders;

            return folders.filter(folder => {
                const searchable = [
                    folder.name,
                    folder.description,
                    ...folder.tags
                ].join(" ").toLowerCase();
                return searchable.includes(query);
            });
        }

        function renderFolderView(filtered) {
            const filteredFolders = filterFolders();
            const sorted = [...filtered].sort((a, b) => {
                if (a.created && b.created) return b.created - a.created;
                if (a.created) return -1;
                if (b.created) return 1;
                return a.order - b.order;
            });

            let html = '';

            // Render folders section if there are folders
            if (filteredFolders.length > 0) {
                html += `
                    <section class="folders-section">
                        <div class="section-header">
                            <span class="material-symbols-rounded" aria-hidden="true">folder_special</span>
                            <h2 class="section-title">Collections</h2>
                            <span class="category-count">${filteredFolders.length}</span>
                        </div>
                        <div class="folders-grid">
                            ${filteredFolders.map(f => renderFolderCard(f)).join("")}
                        </div>
                    </section>
                `;
            }

            // Render pages section
            if (sorted.length > 0) {
                html += `
                    <section class="category">
                        <div class="category-header">
                            <span class="material-symbols-rounded" aria-hidden="true">description</span>
                            <h2 class="category-title">Pages</h2>
                            <span class="category-count">${sorted.length}</span>
                        </div>
                        <div class="pages-grid">
                            ${sorted.map(p => renderCard(p, { showDate: true, showCategoryBadge: true })).join("")}
                        </div>
                    </section>
                `;
            }

            return html;
        }

        function render() {
            const content = document.getElementById("content");
            const filtered = filterPages();
            const filteredFolders = filterFolders();

            if (filtered.length === 0 && filteredFolders.length === 0) {
                content.innerHTML = `
                    <div class="empty-state">
                        <h3>No pages found</h3>
                        <p>Try adjusting your search or filter criteria</p>
                    </div>
                `;
                return;
            }

            switch (currentView) {
                case "folder":
                    content.innerHTML = renderFolderView(filtered);
                    break;
                case "date":
                    content.innerHTML = renderDateView(filtered);
                    break;
                case "grid":
                    content.innerHTML = renderGridView(filtered);
                    break;
                case "category":
                default:
                    content.innerHTML = renderCategoryView(filtered);
                    break;
            }
        }

        // Event handlers
        document.getElementById("search").addEventListener("input", (e) => {
            searchQuery = e.target.value;
            render();
        });

        document.getElementById("filters").addEventListener("click", (e) => {
            if (e.target.classList.contains("filter-btn")) {
                document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
                e.target.classList.add("active");
                activeCategory = e.target.dataset.category;
                render();
            }
        });

        document.addEventListener("keydown", (e) => {
            if (e.key === "/" && document.activeElement.tagName !== "INPUT") {
                e.preventDefault();
                document.getElementById("search").focus();
            }
        });

        document.getElementById("viewSwitcher").addEventListener("click", (e) => {
            const btn = e.target.closest(".view-btn");
            if (btn) {
                document.querySelectorAll(".view-btn").forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
                currentView = btn.dataset.view;
                render();
            }
        });

        // Initialize
        loadPages();
    </script>
</body>
</html>
